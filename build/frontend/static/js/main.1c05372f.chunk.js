(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{261:function(e,a,t){e.exports=t(439)},439:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),c=t.n(l),i=t(61),o=t.n(i),s=(t(266),t(25)),d=t.n(s),u=t(18),m=t(41),p=t.n(m),E=t(73),h=t(19),b=t(447),f=t(457),y=t(454),v=t(448),g=t(74),C=t(39),O=function(e){return{type:"SET_PATIENT_LIST",payload:e}},S=function(e){return{type:"ADD_PATIENT",payload:e}},k=function(e){return{type:"SET_DIAGNOSIS_LIST",payload:e}},D=function(e){return{type:"ADD_ENTRY",payload:e}},w={patients:{},diagnosis:{}},F=Object(l.createContext)([w,function(){return w}]),j=function(){return Object(l.useContext)(F)},x=t(453),N=t(450),T=t(456),Y=t(455),H=t(14),A=t(449),R=t(452),q=function(e){var a=e.name,t=e.label,n=e.options;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(H.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return c.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},I=function(e){var a=e.field,t=e.label,n=e.placeholder;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(H.b,Object.assign({placeholder:n},a)),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(H.a,{name:a.name})))},M=function(e){var a=e.field,t=e.label,n=e.min,r=e.max;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(H.b,Object.assign({},a,{type:"number",min:n,max:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(H.a,{name:a.name})))},V=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,r="diagnosisCodes",l=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,"Diagnoses"),c.a.createElement(R.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:l,onChange:function(e,a){n(r,!0),t(r,a.value)}}),c.a.createElement(H.a,{name:r}))};!function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(n||(n={})),function(e){e.Male="male",e.Female="female",e.Other="other"}(r||(r={}));var L=[{value:r.Male,label:"Male"},{value:r.Female,label:"Female"},{value:r.Other,label:"Other"}],_=function(e){var a=e.onSubmit,t=e.onCancel;return c.a.createElement(H.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:r.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return c.a.createElement(H.c,{className:"form ui"},c.a.createElement(H.b,{label:"Name",placeholder:"Name",name:"name",component:I}),c.a.createElement(H.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:I}),c.a.createElement(H.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:I}),c.a.createElement(H.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:I}),c.a.createElement(q,{label:"Gender",name:"gender",options:L}),c.a.createElement(Y.a,null,c.a.createElement(Y.a.Column,{floated:"left",width:5},c.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(Y.a.Column,{floated:"right",width:5},c.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},P=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(N.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(N.a.Header,null,"Add a new patient"),c.a.createElement(N.a.Content,null,r&&c.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(_,{onSubmit:n,onCancel:t})))},B=t(459),G=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],z=function(e){var a=e.rating,t=e.showText;return c.a.createElement("div",{className:"health-bar"},c.a.createElement(B.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?c.a.createElement("p",null,G[a]):null)},J=function(){var e=j(),a=Object(u.a)(e,2),t=a[0].patients,n=a[1],r=c.a.useState(!1),l=Object(u.a)(r,2),i=l[0],o=l[1],s=c.a.useState(),m=Object(u.a)(s,2),h=m[0],f=m[1],v=function(){o(!1),f(void 0)};return c.a.createElement("div",{className:"App"},c.a.createElement(b.a,{textAlign:"center"},c.a.createElement("h3",null,"Patient list")),c.a.createElement(x.a,{celled:!0},c.a.createElement(x.a.Header,null,c.a.createElement(x.a.Row,null,c.a.createElement(x.a.HeaderCell,null,"Name"),c.a.createElement(x.a.HeaderCell,null,"Gender"),c.a.createElement(x.a.HeaderCell,null,"Occupation"),c.a.createElement(x.a.HeaderCell,null,"Health Rating"))),c.a.createElement(x.a.Body,null,Object.values(t).map((function(e){return c.a.createElement(x.a.Row,{key:e.id},c.a.createElement(x.a.Cell,null,c.a.createElement(E.b,{to:"/patients/".concat(e.id)},e.name)),c.a.createElement(x.a.Cell,null,e.gender),c.a.createElement(x.a.Cell,null,e.occupation),c.a.createElement(x.a.Cell,null,c.a.createElement(z,{showText:!1,rating:1})))})))),c.a.createElement(P,{modalOpen:i,onSubmit:function(e){var a,t;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.a.awrap(p.a.post("".concat("/api","/patients"),e));case 3:a=r.sent,t=a.data,n(S(t)),v(),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.error(r.t0.response.data),f(r.t0.response.data.error);case 13:case"end":return r.stop()}}),null,null,[[0,9]])},error:h,onClose:v}),c.a.createElement(y.a,{onClick:function(){return o(!0)}},"Add New Patient"))},U=t(77),K=function(e){var a=e.onSubmit,t=e.onCancel,r=j(),l=Object(u.a)(r,1)[0].diagnosis;return c.a.createElement(H.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],type:"HealthCheck",healthCheckRating:n.Healthy},onSubmit:a,validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date||(a.date="Field is required"),e.specialist||(a.specialist="Field is required"),e.type||(a.type="Field is required"),e.healthCheckRating||0===e.healthCheckRating||(a.healthCheckRating="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(H.c,{className:"form ui"},c.a.createElement(H.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(H.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:I}),c.a.createElement(H.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(H.b,{label:"Type",placeholder:"HealthCheck",name:"type",component:I}),c.a.createElement(V,{setFieldValue:r,setFieldTouched:i,diagnoses:Object.values(l)}),c.a.createElement(H.b,{label:"Health Check Rating",name:"healthCheckRating",component:M,min:0,max:3}),c.a.createElement(Y.a,null,c.a.createElement(Y.a.Column,{floated:"left",width:5},c.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(Y.a.Column,{floated:"right",width:5},c.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},Q=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(N.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(N.a.Header,null,"Add a new entry"),c.a.createElement(N.a.Content,null,r&&c.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(K,{onSubmit:n,onCancel:t})))},W=function(e){var a=e.onSubmit,t=e.onCancel,n=j(),r=Object(u.a)(n,1)[0].diagnosis;return c.a.createElement(H.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],type:"OccupationalHealthcare",employerName:"",sickLeave:{startDate:"",endDate:""}},onSubmit:a,validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date||(a.date="Field is required"),e.specialist||(a.specialist="Field is required"),e.type||(a.type="Field is required"),e.employerName||(a.employerName="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(H.c,{className:"form ui"},c.a.createElement(H.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(H.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:I}),c.a.createElement(H.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(V,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(H.b,{label:"Type",placeholder:"OccupationalHealthcare",name:"type",component:I}),c.a.createElement(H.b,{label:"Employer Name",placeholder:"Employer Name",name:"employerName",component:I}),c.a.createElement(H.b,{label:"Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:I}),c.a.createElement(H.b,{label:"End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:I}),c.a.createElement(Y.a,null,c.a.createElement(Y.a.Column,{floated:"left",width:5},c.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(Y.a.Column,{floated:"right",width:5},c.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},X=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(N.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(N.a.Header,null,"Add a new entry"),c.a.createElement(N.a.Content,null,r&&c.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(W,{onSubmit:n,onCancel:t})))},Z=function(e){var a=e.onSubmit,t=e.onCancel,n=j(),r=Object(u.a)(n,1)[0].diagnosis;return c.a.createElement(H.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],type:"Hospital",discharge:{date:"",criteria:""}},onSubmit:a,validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date||(a.date="Field is required"),e.specialist||(a.specialist="Field is required"),e.type||(a.type="Field is required"),e.discharge||(a.employerName="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(H.c,{className:"form ui"},c.a.createElement(H.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(H.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:I}),c.a.createElement(H.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(V,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(H.b,{label:"Type",placeholder:"Hospital",name:"type",component:I}),c.a.createElement(H.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:I}),c.a.createElement(H.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:I}),c.a.createElement(Y.a,null,c.a.createElement(Y.a.Column,{floated:"left",width:5},c.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(Y.a.Column,{floated:"right",width:5},c.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},$=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(N.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(N.a.Header,null,"Add a new entry"),c.a.createElement(N.a.Content,null,r&&c.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(Z,{onSubmit:n,onCancel:t})))},ee=function(e){var a=e.entry;return c.a.createElement("div",null,c.a.createElement(T.a,{style:{margin:"10px 0"}},c.a.createElement("h4",null,a.date," ",c.a.createElement(U.a,{name:"hospital",size:"large"})),c.a.createElement("p",{style:{color:"grey"}},c.a.createElement("i",null,a.description)),c.a.createElement("div",{style:{color:"grey"}},"Specialist: ",a.specialist),a.diagnosisCodes&&c.a.createElement("div",{style:{color:"grey"}},"Diagnoses:"," ",c.a.createElement("ul",null,a.diagnosisCodes.map((function(e){return c.a.createElement("li",{key:e},e)})))),c.a.createElement("div",{style:{color:"grey"}},"Discharge date: ",a.discharge.date),c.a.createElement("div",{style:{color:"grey"}},"Discharge criteria: ",a.discharge.criteria)))},ae=function(e){var a=e.entry;return c.a.createElement("div",null,c.a.createElement(T.a,{style:{margin:"10px 0"}},c.a.createElement("h4",null,a.date," ",c.a.createElement(U.a,{name:"stethoscope",size:"large"})," ",a.employerName),c.a.createElement("p",{style:{color:"grey"}},c.a.createElement("i",null,a.description)),c.a.createElement("div",{style:{color:"grey"}},"Specialist: ",a.specialist),a.diagnosisCodes&&c.a.createElement("div",{style:{color:"grey"}},"Diagnoses:"," ",c.a.createElement("ul",null,a.diagnosisCodes.map((function(e){return c.a.createElement("li",{key:e},e)})))),a.sickLeave&&c.a.createElement("div",{style:{color:"grey"}},"Sick leave: ",a.sickLeave.startDate," - ",a.sickLeave.endDate)))},te=function(e){var a=e.entry;return c.a.createElement("div",null,c.a.createElement(T.a,{style:{margin:"10px 0"}},c.a.createElement("h4",null,a.date," ",c.a.createElement(U.a,{name:"doctor",size:"large"})),c.a.createElement("p",{style:{color:"grey"}},c.a.createElement("i",null,a.description)),c.a.createElement("div",{style:{color:"grey"}},"Specialist: ",a.specialist),a.diagnosisCodes&&c.a.createElement("div",{style:{color:"grey"}},"Diagnoses:"," ",c.a.createElement("ul",null,a.diagnosisCodes.map((function(e){return c.a.createElement("li",{key:e},e)})))),c.a.createElement((function(e){switch(e.entry.healthCheckRating){case 0:return c.a.createElement(U.a,{color:"green",name:"heart"});case 1:return c.a.createElement(U.a,{color:"yellow",name:"heart"});case 2:return c.a.createElement(U.a,{color:"orange",name:"heart"});case 3:return c.a.createElement(U.a,{color:"red",name:"heart"});default:return c.a.createElement("div",null)}}),{entry:a})))},ne=function(){var e=Object(h.f)().id,a=j(),t=Object(u.a)(a,2)[1],n=c.a.useState(),r=Object(u.a)(n,2),l=r[0],i=r[1],o=c.a.useState(),s=Object(u.a)(o,2),m=s[0],E=s[1],b=c.a.useState(),f=Object(u.a)(b,2),v=f[0],g=f[1],C=c.a.useState(!1),O=Object(u.a)(C,2),S=O[0],k=O[1],w=c.a.useState(!1),F=Object(u.a)(w,2),x=F[0],N=F[1],T=c.a.useState(!1),Y=Object(u.a)(T,2),H=Y[0],A=Y[1],R=function(){k(!1),i(void 0)},q=function(){N(!1),i(void 0)},I=function(){A(!1),i(void 0)};c.a.useEffect((function(){!function(){var a;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(p.a.get("".concat("/api","/patients/").concat(e)));case 3:a=t.sent,E(a.data),g(a.data.entries),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0.response.data),i(t.t0.response.data);case 12:case"end":return t.stop()}}),null,null,[[0,8]])}()}),[e]);var M=function(e){var a=e.entry;switch(a.type){case"Hospital":return c.a.createElement(ee,{key:a.id,entry:a});case"OccupationalHealthcare":return c.a.createElement(ae,{key:a.id,entry:a});case"HealthCheck":return c.a.createElement(te,{key:a.id,entry:a});default:return function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(a)}};return m?c.a.createElement("div",null,c.a.createElement("h2",null,m.name,"male"===m.gender?c.a.createElement(U.a,{name:"man"}):c.a.createElement(U.a,{name:"woman"})),c.a.createElement("p",null,"SSN: ",m.ssn,c.a.createElement("br",null),"Occupation: ",m.occupation),c.a.createElement(Q,{modalOpen:S,onSubmit:function(a){var n,r;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,d.a.awrap(p.a.post("".concat("/api","/patients/").concat(e,"/entries"),a));case 3:n=l.sent,r=n.data,t(D(r)),v&&(v.push(r),g(v)),R(),l.next=14;break;case 10:l.prev=10,l.t0=l.catch(0),console.error(l.t0.response.data),i(l.t0.response.data.error);case 14:case"end":return l.stop()}}),null,null,[[0,10]])},error:l,onClose:R}),c.a.createElement(y.a,{onClick:function(){return k(!0)}},"New Health Check Entry"),c.a.createElement(X,{modalOpen:x,onSubmit:function(a){var n,r;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,d.a.awrap(p.a.post("".concat("/api","/patients/").concat(e,"/entries"),a));case 3:n=l.sent,r=n.data,t(D(r)),v&&(v.push(r),g(v)),q(),l.next=14;break;case 10:l.prev=10,l.t0=l.catch(0),console.error(l.t0.response.data),i(l.t0.response.data.error);case 14:case"end":return l.stop()}}),null,null,[[0,10]])},error:l,onClose:q}),c.a.createElement(y.a,{onClick:function(){return N(!0)}},"New OccupationalHealthcare Entry"),c.a.createElement($,{modalOpen:H,onSubmit:function(a){var n,r;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,d.a.awrap(p.a.post("".concat("/api","/patients/").concat(e,"/entries"),a));case 3:n=l.sent,r=n.data,t(D(r)),v&&(v.push(r),g(v)),I(),l.next=14;break;case 10:l.prev=10,l.t0=l.catch(0),console.error(l.t0.response.data),i(l.t0.response.data.error);case 14:case"end":return l.stop()}}),null,null,[[0,10]])},error:l,onClose:I}),c.a.createElement(y.a,{onClick:function(){return A(!0)}},"New Hospital Entry"),c.a.createElement("h3",null,"Entries"),m.entries.length>0&&c.a.createElement("div",null,m.entries.map((function(e){return M({entry:e})})))):c.a.createElement("div",null,l)},re=function(){var e=j(),a=Object(u.a)(e,2)[1];return c.a.useEffect((function(){!function(){var e,t;d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(p.a.get("".concat("/api","/patients")));case 3:e=n.sent,t=e.data,a(O(t)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}();!function(){var e,t;d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(p.a.get("".concat("/api","/diagnosis")));case 3:e=n.sent,t=e.data,a(k(t)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}()}),[a]),c.a.createElement("div",{className:"App"},c.a.createElement(E.a,null,c.a.createElement(b.a,null,c.a.createElement(f.a,{as:"h1"},"Patientor"),c.a.createElement(y.a,{as:E.b,to:"/",primary:!0},"Home"),c.a.createElement(v.a,{hidden:!0}),c.a.createElement(h.c,null,c.a.createElement(h.a,{path:"/patients/:id",render:function(){return c.a.createElement(ne,null)}}),c.a.createElement(h.a,{path:"/",render:function(){return c.a.createElement(J,null)}})))))};o.a.render(c.a.createElement((function(e){var a=e.reducer,t=e.children,n=Object(l.useReducer)(a,w),r=Object(u.a)(n,2),i=r[0],o=r[1];return c.a.createElement(F.Provider,{value:[i,o]},t)}),{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(C.a)({},e,{patients:Object(C.a)({},a.payload.reduce((function(e,a){return Object(C.a)({},e,Object(g.a)({},a.id,a))}),{}),{},e.patients)});case"ADD_PATIENT":return Object(C.a)({},e,{patients:Object(C.a)({},e.patients,Object(g.a)({},a.payload.id,a.payload))});case"SET_DIAGNOSIS_LIST":return Object(C.a)({},e,{diagnosis:Object(C.a)({},a.payload.reduce((function(e,a){return Object(C.a)({},e,Object(g.a)({},a.code,a))}),{}),{},e.diagnosis)});case"ADD_ENTRY":return Object(C.a)({},e,{patients:Object(C.a)({},e.patients)});default:return e}}},c.a.createElement(re,null)),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.1c05372f.chunk.js.map